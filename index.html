<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WealthPro - Enterprise Portfolio Optimization</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            min-height: 100vh;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 40px 0;
        }

        .header h1 {
            font-size: 3.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2rem;
            color: #94a3b8;
            font-weight: 400;
        }

        .form-container {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            margin-bottom: 8px;
            color: #f1f5f9;
            font-size: 0.95rem;
        }

        .form-group input, .form-group select {
            padding: 15px 20px;
            border: 2px solid rgba(148, 163, 184, 0.2);
            border-radius: 12px;
            background: rgba(15, 23, 42, 0.5);
            color: #e2e8f0;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .helper-text {
            font-size: 0.85rem;
            color: #94a3b8;
            margin-top: 5px;
        }

        .amount-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .amount-btn {
            padding: 8px 16px;
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            border-radius: 8px;
            color: #3b82f6;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s ease;
        }

        .amount-btn:hover {
            background: rgba(59, 130, 246, 0.2);
            transform: translateY(-1px);
        }

        .optimize-btn {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            padding: 18px 40px;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .optimize-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }

        .optimize-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .results-container {
            display: none;
            margin-top: 40px;
        }

        .results-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .results-header h2 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #10b981;
            margin-bottom: 10px;
        }

        .results-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .summary-card {
            background: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 16px;
            padding: 25px;
            text-align: center;
        }

        .summary-card h3 {
            color: #94a3b8;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 10px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .summary-card .value {
            font-size: 2rem;
            font-weight: 700;
            color: #f1f5f9;
        }

        .analysis-section {
            background: rgba(30, 41, 59, 0.4);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .allocation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .allocation-card {
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 12px;
            padding: 25px;
        }

        .allocation-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 15px;
        }

        .asset-name {
            font-weight: 600;
            color: #f1f5f9;
            font-size: 1.1rem;
        }

        .asset-percentage {
            font-weight: 700;
            font-size: 1.2rem;
            color: #10b981;
        }

        .asset-amount {
            color: #94a3b8;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .asset-details {
            font-size: 0.9rem;
            color: #cbd5e1;
            line-height: 1.5;
        }

        .sector-recommendations {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .sector-title {
            font-weight: 600;
            color: #3b82f6;
            margin-bottom: 10px;
        }

        .sector-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .sector-tag {
            background: rgba(59, 130, 246, 0.2);
            color: #93c5fd;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .risk-analysis {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .risk-card {
            background: rgba(15, 23, 42, 0.6);
            border-radius: 12px;
            padding: 20px;
            border-left: 4px solid;
        }

        .risk-card.best-case {
            border-left-color: #10b981;
        }

        .risk-card.worst-case {
            border-left-color: #ef4444;
        }

        .risk-card.likely-case {
            border-left-color: #f59e0b;
        }

        .risk-card h4 {
            color: #f1f5f9;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .risk-value {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .risk-card.best-case .risk-value {
            color: #10b981;
        }

        .risk-card.worst-case .risk-value {
            color: #ef4444;
        }

        .risk-card.likely-case .risk-value {
            color: #f59e0b;
        }

        .factors-list {
            background: rgba(15, 23, 42, 0.5);
            border-radius: 10px;
            padding: 20px;
        }

        .factors-list h4 {
            color: #f1f5f9;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .factors-list ul {
            list-style: none;
            padding: 0;
        }

        .factors-list li {
            padding: 8px 0;
            color: #cbd5e1;
            font-size: 0.9rem;
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
        }

        .factors-list li:last-child {
            border-bottom: none;
        }

        .factors-list li::before {
            content: "•";
            color: #3b82f6;
            margin-right: 10px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #94a3b8;
        }

        .spinner {
            border: 3px solid rgba(59, 130, 246, 0.1);
            border-radius: 50%;
            border-top: 3px solid #3b82f6;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .warning-box {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .warning-box h4 {
            color: #ef4444;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .warning-box p {
            color: #fca5a5;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }
            
            .form-container {
                padding: 25px;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .amount-buttons {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>WealthPro</h1>
            <p>Enterprise Portfolio Optimization & Risk Analysis</p>
        </div>

        <div class="form-container">
            <form id="portfolioForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="investment">Investment Amount (₹)</label>
                        <input type="number" id="investment" min="100" max="1000000000" step="1000" required>
                        <div class="helper-text">Range: ₹100 to ₹100 Crores</div>
                        <div class="amount-buttons">
                            <div class="amount-btn" data-amount="100000">₹1 Lakh</div>
                            <div class="amount-btn" data-amount="500000">₹5 Lakh</div>
                            <div class="amount-btn" data-amount="1000000">₹10 Lakh</div>
                            <div class="amount-btn" data-amount="5000000">₹50 Lakh</div>
                            <div class="amount-btn" data-amount="10000000">₹1 Crore</div>
                            <div class="amount-btn" data-amount="100000000">₹10 Crore</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="targetReturn">Target Annual Return (%)</label>
                        <input type="number" id="targetReturn" min="1" max="1000" step="0.5" required>
                        <div class="helper-text">From conservative 6% to crypto moonshots 500%+</div>
                    </div>

                    <div class="form-group">
                        <label for="age">Your Age</label>
                        <input type="number" id="age" min="18" max="80" required>
                        <div class="helper-text">Affects risk capacity and time horizon</div>
                    </div>

                    <div class="form-group">
                        <label for="timeline">Investment Timeline</label>
                        <select id="timeline" required>
                            <option value="">Select Timeline</option>
                            <option value="short">Short Term (1-3 years)</option>
                            <option value="medium">Medium Term (3-7 years)</option>
                            <option value="long">Long Term (7-15 years)</option>
                            <option value="retirement">Retirement (15+ years)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="riskTolerance">Risk Tolerance</label>
                        <select id="riskTolerance" required>
                            <option value="">Select Risk Level</option>
                            <option value="conservative">Conservative - Capital preservation first</option>
                            <option value="moderate">Moderate - Balanced growth</option>
                            <option value="growth">Growth - Higher returns, accept volatility</option>
                            <option value="aggressive">Aggressive - Maximum growth potential</option>
                            <option value="crypto">Crypto Enthusiast - Moon or bust</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="existingInvestments">Existing Investments (₹)</label>
                        <input type="number" id="existingInvestments" min="0" max="1000000000" step="1000">
                        <div class="helper-text">Your current portfolio value (optional)</div>
                    </div>
                </div>

                <button type="submit" class="optimize-btn">Optimize Portfolio & Generate Analysis</button>
            </form>
        </div>

        <div id="results" class="results-container">
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>Analyzing market conditions and optimizing your portfolio...</p>
            </div>
            
            <div id="analysisResults" style="display: none;">
                <!-- Results will be populated here -->
            </div>
        </div>
    </div>

    <script>
        // Market Data with detailed sector information
        const marketData = {
            'nifty50': { 
                name: 'Nifty 50 (Large Cap)', 
                return: 11.8, 
                volatility: 15.2,
                description: 'Top 50 companies by market cap',
                sectors: ['Banking', 'IT Services', 'Oil & Gas', 'Automotive', 'FMCG'],
                factors: ['Interest rates', 'GDP growth', 'Corporate earnings', 'FII flows'],
                allocation: {
                    'Banking': 35,
                    'IT Services': 25, 
                    'Oil & Gas': 15,
                    'FMCG': 15,
                    'Others': 10
                }
            },
            'niftymidcap': { 
                name: 'Nifty Midcap 100', 
                return: 13.2, 
                volatility: 22.5,
                description: 'Mid-cap growth opportunities',
                sectors: ['Banking', 'Pharmaceuticals', 'Chemicals', 'Engineering', 'Textiles'],
                factors: ['Domestic demand', 'Policy changes', 'Liquidity', 'Market sentiment'],
                allocation: {
                    'Banking': 30,
                    'Pharmaceuticals': 25,
                    'Chemicals': 20,
                    'Engineering': 15,
                    'Others': 10
                }
            },
            'niftysmallcap': { 
                name: 'Nifty Smallcap 100', 
                return: 14.5, 
                volatility: 28.1,
                description: 'Small-cap high growth potential',
                sectors: ['Manufacturing', 'Chemicals', 'Pharmaceuticals', 'Textiles', 'Engineering'],
                factors: ['Rural demand', 'Government schemes', 'Monsoon', 'Local regulations'],
                allocation: {
                    'Manufacturing': 25,
                    'Chemicals': 25,
                    'Pharmaceuticals': 20,
                    'Textiles': 15,
                    'Others': 15
                }
            },
            'niftybank': { 
                name: 'Banking Sector', 
                return: 12.1, 
                volatility: 25.3,
                description: 'Banking and financial services',
                sectors: ['Private Banks', 'PSU Banks', 'NBFCs'],
                factors: ['Interest rates', 'Credit growth', 'NPA levels', 'RBI policy'],
                allocation: {
                    'Private Banks': 60,
                    'PSU Banks': 25,
                    'NBFCs': 15
                }
            },
            'niftyit': { 
                name: 'IT Sector', 
                return: 15.3, 
                volatility: 20.7,
                description: 'Technology and IT services',
                sectors: ['Software Services', 'Software Products', 'IT Consulting'],
                factors: ['US economy', 'Dollar rates', 'Digital transformation', 'AI adoption'],
                allocation: {
                    'Software Services': 70,
                    'Software Products': 20,
                    'IT Consulting': 10
                }
            },
            'nasdaq': { 
                name: 'NASDAQ 100 (Global)', 
                return: 17.2, 
                volatility: 18.5,
                description: 'International diversification',
                sectors: ['Technology', 'Consumer Discretionary', 'Communication', 'Healthcare'],
                factors: ['US Fed policy', 'Tech innovation', 'Consumer spending', 'Currency rates'],
                allocation: {
                    'Technology': 45,
                    'Consumer Discretionary': 20,
                    'Communication': 20,
                    'Others': 15
                }
            },
            'bonds': { 
                name: 'Government Bonds', 
                return: 6.8, 
                volatility: 4.2,
                description: 'Stable income generation',
                sectors: ['10-Year G-Sec', '5-Year G-Sec', 'State Bonds'],
                factors: ['RBI repo rate', 'Inflation', 'Fiscal deficit', 'Global yields'],
                allocation: {
                    '10-Year G-Sec': 50,
                    '5-Year G-Sec': 30,
                    'State Bonds': 20
                }
            },
            'corporatebonds': { 
                name: 'Corporate Bonds', 
                return: 7.5, 
                volatility: 6.1,
                description: 'Higher yield debt instruments',
                sectors: ['AAA Corporate', 'Banking Bonds', 'Infrastructure Bonds'],
                factors: ['Credit ratings', 'Interest rates', 'Corporate earnings', 'Liquidity'],
                allocation: {
                    'AAA Corporate': 60,
                    'Banking Bonds': 25,
                    'Infrastructure': 15
                }
            },
            'gold': { 
                name: 'Gold ETF', 
                return: 9.2, 
                volatility: 12.8,
                description: 'Inflation hedge and stability',
                sectors: ['Physical Gold', 'Gold ETFs', 'Gold Bonds'],
                factors: ['Dollar strength', 'Inflation', 'Global uncertainty', 'Central bank buying'],
                allocation: {
                    'Gold ETFs': 70,
                    'Gold Bonds': 20,
                    'Physical Gold': 10
                }
            },
            'reits': { 
                name: 'Indian REITs', 
                return: 8.9, 
                volatility: 16.4,
                description: 'Real estate investment',
                sectors: ['Office REITs', 'Retail REITs', 'Industrial REITs'],
                factors: ['Interest rates', 'Office demand', 'Rental yields', 'Economic growth'],
                allocation: {
                    'Office REITs': 70,
                    'Retail REITs': 20,
                    'Industrial REITs': 10
                }
            },
            'bitcoin': { 
                name: 'Bitcoin', 
                return: 89.5, 
                volatility: 75.2,
                description: 'Digital store of value',
                sectors: ['Bitcoin'],
                factors: ['Regulation', 'Institutional adoption', 'Mining costs', 'Market sentiment'],
                allocation: {
                    'Bitcoin': 100
                }
            },
            'ethereum': { 
                name: 'Ethereum', 
                return: 145.2, 
                volatility: 85.7,
                description: 'Smart contract platform',
                sectors: ['Ethereum'],
                factors: ['DeFi growth', 'NFT market', 'ETH 2.0 upgrade', 'Developer activity'],
                allocation: {
                    'Ethereum': 100
                }
            },
            'altcoins': { 
                name: 'Altcoins Portfolio', 
                return: 234.7, 
                volatility: 120.5,
                description: 'Diversified crypto basket',
                sectors: ['DeFi Tokens', 'Layer 1s', 'Gaming Tokens', 'Utility Tokens'],
                factors: ['Bitcoin performance', 'Regulation', 'Innovation cycles', 'Hype cycles'],
                allocation: {
                    'DeFi Tokens': 30,
                    'Layer 1s': 30,
                    'Gaming/NFT': 25,
                    'Utility Tokens': 15
                }
            }
        };

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Amount button clicks
            document.querySelectorAll('.amount-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const amount = this.dataset.amount;
                    document.getElementById('investment').value = amount;
                    
                    // Visual feedback
                    this.style.background = 'rgba(59, 130, 246, 0.3)';
                    setTimeout(() => {
                        this.style.background = 'rgba(59, 130, 246, 0.1)';
                    }, 200);
                });
            });

            // Form submission
            document.getElementById('portfolioForm').addEventListener('submit', function(e) {
                e.preventDefault();
                optimizePortfolio();
            });
        });

        function optimizePortfolio() {
            // Show loading
            document.getElementById('results').style.display = 'block';
            document.getElementById('loading').style.display = 'block';
            document.getElementById('analysisResults').style.display = 'none';

            // Get form values
            const investment = parseFloat(document.getElementById('investment').value);
            const targetReturn = parseFloat(document.getElementById('targetReturn').value);
            const age = parseInt(document.getElementById('age').value);
            const timeline = document.getElementById('timeline').value;
            const riskTolerance = document.getElementById('riskTolerance').value;
            const existingInvestments = parseFloat(document.getElementById('existingInvestments').value) || 0;

            // Simulate processing time
            setTimeout(() => {
                const allocation = calculateOptimalAllocation(targetReturn, age, timeline, riskTolerance);
                displayComprehensiveAnalysis(allocation, targetReturn, investment, existingInvestments, age, timeline, riskTolerance);
                
                document.getElementById('loading').style.display = 'none';
                document.getElementById('analysisResults').style.display = 'block';
            }, 2500);
        }

        function calculateOptimalAllocation(targetReturn, age, timeline, riskTolerance) {
            let allocation = {};
            
            // Determine risk category based on target return
            if (targetReturn <= 8) {
                // Conservative
                allocation = {
                    'bonds': 50,
                    'nifty50': 35,
                    'gold': 15
                };
            } else if (targetReturn <= 12) {
                // Moderate
                allocation = {
                    'nifty50': 45,
                    'bonds': 25,
                    'niftymidcap': 20,
                    'gold': 10
                };
            } else if (targetReturn <= 15) {
                // Growth
                allocation = {
                    'nifty50': 40,
                    'niftymidcap': 25,
                    'nasdaq': 25,
                    'niftyit': 10
                };
            } else if (targetReturn <= 25) {
                // Aggressive
                allocation = {
                    'nifty50': 35,
                    'nasdaq': 25,
                    'niftymidcap': 20,
                    'niftyit': 15,
                    'niftysmallcap': 5
                };
            } else if (targetReturn <= 50) {
                // High Risk
                allocation = {
                    'nasdaq': 30,
                    'niftyit': 25,
                    'niftymidcap': 20,
                    'niftysmallcap': 15,
                    'bitcoin': 10
                };
            } else if (targetReturn <= 100) {
                // Very High Risk
                allocation = {
                    'bitcoin': 25,
                    'nasdaq': 25,
                    'niftyit': 20,
                    'ethereum': 15,
                    'niftysmallcap': 15
                };
            } else {
                // Extreme Risk
                allocation = {
                    'bitcoin': 35,
                    'ethereum': 25,
                    'altcoins': 20,
                    'nasdaq': 15,
                    'niftyit': 5
                };
            }

            return allocation;
        }

        function displayComprehensiveAnalysis(allocation, targetReturn, investment, existingInvestments, age, timeline, riskTolerance) {
            // Calculate portfolio metrics
            let expectedReturn = 0;
            let portfolioVolatility = 0;
            
            Object.keys(allocation).forEach(asset => {
                const weight = allocation[asset] / 100;
                expectedReturn += weight * marketData[asset].return;
                portfolioVolatility += weight * weight * marketData[asset].volatility * marketData[asset].volatility;
            });
            
            portfolioVolatility = Math.sqrt(portfolioVolatility);

            // Calculate scenarios
            const bestCase = expectedReturn + 1.65 * portfolioVolatility;  // 95th percentile
            const worstCase = expectedReturn - 1.65 * portfolioVolatility; // 5th percentile
            const likelyCase = expectedReturn; // 50th percentile

            // Format currency
            const formatCurrency = (amount) => {
                return new Intl.NumberFormat('en-IN', {
                    style: 'currency',
                    currency: 'INR',
                    maximumFractionDigits: 0
                }).format(amount);
            };

            // Generate analysis HTML
            const analysisHTML = `
                <div class="results-header">
                    <h2>Your Optimized Portfolio Analysis</h2>
                    <p>Comprehensive insights for ${formatCurrency(investment)} targeting ${targetReturn}% returns</p>
                </div>

                <div class="results-summary">
                    <div class="summary-card">
                        <h3>Expected Return</h3>
                        <div class="value">${expectedReturn.toFixed(1)}%</div>
                    </div>
                    <div class="summary-card">
                        <h3>Portfolio Risk</h3>
                        <div class="value">${portfolioVolatility.toFixed(1)}%</div>
                    </div>
                    <div class="summary-card">
                        <h3>5-Year Value</h3>
                        <div class="value">${formatCurrency(investment * Math.pow(1 + expectedReturn/100, 5))}</div>
                    </div>
                    <div class="summary-card">
                        <h3>Risk Score</h3>
                        <div class="value">${getRiskScore(portfolioVolatility)}</div>
                    </div>
                </div>

                ${targetReturn > 50 ? `
                <div class="warning-box">
                    <h4>⚠️ Extreme Risk Warning</h4>
                    <p>Your target return of ${targetReturn}% requires crypto-heavy allocation. You could lose 60-80% of your investment in bad years. Only invest what you can afford to lose completely.</p>
                </div>
                ` : ''}

                <div class="analysis-section">
                    <h3 class="section-title">🎯 Recommended Asset Allocation</h3>
                    <div class="allocation-grid">
                        ${Object.keys(allocation).map(asset => {
                            const assetData = marketData[asset];
                            const amount = (investment * allocation[asset]) / 100;
                            return `
                                <div class="allocation-card">
                                    <div class="allocation-header">
                                        <div class="asset-name">${assetData.name}</div>
                                        <div class="asset-percentage">${allocation[asset]}%</div>
                                    </div>
                                    <div class="asset-amount">Amount: ${formatCurrency(amount)}</div>
                                    <div class="asset-details">
                                        <p><strong>Expected Return:</strong> ${assetData.return}% annually</p>
                                        <p><strong>Risk Level:</strong> ${assetData.volatility}% volatility</p>
                                        <p>${assetData.description}</p>
                                    </div>
                                    <div class="sector-recommendations">
                                        <div class="sector-title">💡 Sector Focus Areas:</div>
                                        <div class="sector-list">
                                            ${assetData.sectors.map(sector => `<span class="sector-tag">${sector}</span>`).join('')}
                                        </div>
                                        <div style="margin-top: 10px; font-size: 0.85rem; color: #94a3b8;">
                                            <strong>Top allocation within ${assetData.name}:</strong><br>
                                            ${Object.keys(assetData.allocation).map(sector => 
                                                `${sector}: ${assetData.allocation[sector]}%`
                                            ).join(', ')}
                                        </div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>

                <div class="analysis-section">
                    <h3 class="section-title">📊 Risk Analysis & Scenarios</h3>
                    <div class="risk-analysis">
                        <div class="risk-card best-case">
                            <h4>Best Case Scenario (10% chance)</h4>
                            <div class="risk-value">+${bestCase.toFixed(1)}%</div>
                            <p>Portfolio value: ${formatCurrency(investment * (1 + bestCase/100))}</p>
                        </div>
                        <div class="risk-card likely-case">
                            <h4>Most Likely Scenario (60% chance)</h4>
                            <div class="risk-value">+${likelyCase.toFixed(1)}%</div>
                            <p>Portfolio value: ${formatCurrency(investment * (1 + likelyCase/100))}</p>
                        </div>
                        <div class="risk-card worst-case">
                            <h4>Worst Case Scenario (10% chance)</h4>
                            <div class="risk-value">${worstCase.toFixed(1)}%</div>
                            <p>Portfolio value: ${formatCurrency(investment * (1 + worstCase/100))}</p>
                        </div>
                    </div>
                </div>

                <div class="analysis-section">
                    <h3 class="section-title">⚡ Key Risk Factors & Market Dependencies</h3>
                    <div class="allocation-grid">
                        ${Object.keys(allocation).map(asset => {
                            const assetData = marketData[asset];
                            return `
                                <div class="factors-list">
                                    <h4>${assetData.name} - Key Factors</h4>
                                    <ul>
                                        ${assetData.factors.map(factor => `<li>${factor}</li>`).join('')}
                                    </ul>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>

                <div class="analysis-section">
                    <h3 class="section-title">🎯 Implementation Strategy</h3>
                    <div class="factors-list">
                        <h4>Phase 1: Core Allocation (First 3 months)</h4>
                        <ul>
                            ${Object.keys(allocation).slice(0, 2).map(asset => {
                                const assetData = marketData[asset];
                                const amount = (investment * allocation[asset]) / 100;
                                return `<li>Invest ${formatCurrency(amount)} in ${assetData.name} through ${getInvestmentVehicle(asset)}</li>`;
                            }).join('')}
                        </ul>
                    </div>
                    
                    <div class="factors-list">
                        <h4>Phase 2: Diversification (Next 3 months)</h4>
                        <ul>
                            ${Object.keys(allocation).slice(2).map(asset => {
                                const assetData = marketData[asset];
                                const amount = (investment * allocation[asset]) / 100;
                                return `<li>Add ${formatCurrency(amount)} to ${assetData.name} via ${getInvestmentVehicle(asset)}</li>`;
                            }).join('')}
                        </ul>
                    </div>

                    <div class="factors-list">
                        <h4>Ongoing Management</h4>
                        <ul>
                            <li>Review portfolio quarterly and rebalance if any asset deviates >5% from target</li>
                            <li>Monitor key risk factors for each asset class monthly</li>
                            <li>Consider tax-loss harvesting in equity investments after 1 year</li>
                            <li>Adjust allocation based on age - reduce risk by 1% per year after 35</li>
                            ${targetReturn > 30 ? '<li>Take profits on crypto positions when they exceed 150% gains</li>' : ''}
                        </ul>
                    </div>
                </div>

                <div class="analysis-section">
                    <h3 class="section-title">📈 Current Market Outlook & Sector Insights</h3>
                    
                    <div class="factors-list">
                        <h4>Indian Equity Markets (2024-25 Outlook)</h4>
                        <ul>
                            <li><strong>Banking Sector:</strong> Positive outlook due to credit growth recovery and improving asset quality. Focus on private banks over PSUs.</li>
                            <li><strong>IT Services:</strong> Cautious optimism as US recession fears ease. Focus on companies with AI capabilities and strong client relationships.</li>
                            <li><strong>Manufacturing:</strong> Strong government push via PLI schemes. Focus on electronics, chemicals, and auto components.</li>
                            <li><strong>FMCG:</strong> Rural recovery expected in H2. Focus on companies with strong distribution networks.</li>
                        </ul>
                    </div>

                    <div class="factors-list">
                        <h4>Global Markets</h4>
                        <ul>
                            <li><strong>NASDAQ:</strong> AI revolution driving growth in mega-cap tech. Focus on companies with moats in AI/cloud.</li>
                            <li><strong>Emerging Markets:</strong> Selective opportunities as dollar strength moderates.</li>
                        </ul>
                    </div>

                    ${allocation.bitcoin || allocation.ethereum || allocation.altcoins ? `
                    <div class="factors-list">
                        <h4>Cryptocurrency Outlook</h4>
                        <ul>
                            <li><strong>Bitcoin:</strong> Institutional adoption growing. Regulatory clarity improving globally.</li>
                            <li><strong>Ethereum:</strong> Benefiting from DeFi growth and NFT adoption. ETH 2.0 reducing energy concerns.</li>
                            <li><strong>Altcoins:</strong> High risk/reward. Focus on utility tokens with real use cases.</li>
                            <li><strong>Regulation Risk:</strong> Indian crypto regulations still evolving. Limit exposure to 5-10% of portfolio.</li>
                        </ul>
                    </div>
                    ` : ''}
                </div>

                <div class="analysis-section">
                    <h3 class="section-title">⏰ Monitoring & Rebalancing Schedule</h3>
                    
                    <div class="risk-analysis">
                        <div class="risk-card best-case">
                            <h4>Monthly Reviews</h4>
                            <div class="risk-value">Check</div>
                            <p>• Portfolio performance vs benchmark<br>• Major news affecting your assets<br>• Rebalancing needs</p>
                        </div>
                        <div class="risk-card likely-case">
                            <h4>Quarterly Actions</h4>
                            <div class="risk-value">Rebalance</div>
                            <p>• Trim overweight positions<br>• Add to underweight assets<br>• Tax-loss harvesting</p>
                        </div>
                        <div class="risk-card worst-case">
                            <h4>Annual Review</h4>
                            <div class="risk-value">Reassess</div>
                            <p>• Life goals changes<br>• Risk tolerance evolution<br>• Strategy adjustment</p>
                        </div>
                    </div>
                </div>

                <div class="analysis-section">
                    <h3 class="section-title">📋 Important Disclaimers</h3>
                    <div class="factors-list">
                        <h4>Investment Risks</h4>
                        <ul>
                            <li>Past performance does not guarantee future results</li>
                            <li>All investments carry risk of loss including loss of principal</li>
                            <li>Crypto investments are highly speculative and regulatory risks exist</li>
                            <li>Market conditions can change rapidly affecting asset performance</li>
                            <li>This analysis is for educational purposes only, not personalized advice</li>
                            <li>Consider consulting a qualified financial advisor before investing</li>
                            <li>Ensure you understand all risks before proceeding with investments</li>
                        </ul>
                    </div>
                </div>
            `;

            document.getElementById('analysisResults').innerHTML = analysisHTML;
        }

        function getRiskScore(volatility) {
            if (volatility < 10) return "Low";
            if (volatility < 20) return "Medium";
            if (volatility < 40) return "High";
            return "Extreme";
        }

        function getInvestmentVehicle(asset) {
            const vehicles = {
                'nifty50': 'Nifty 50 Index Fund/ETF',
                'niftymidcap': 'Midcap Mutual Fund',
                'niftysmallcap': 'Smallcap Mutual Fund',
                'niftybank': 'Banking Sector ETF',
                'niftyit': 'IT Sector Fund',
                'nasdaq': 'NASDAQ 100 Fund/ETF',
                'bonds': 'Govt Bond Fund/Direct G-Sec',
                'corporatebonds': 'Corporate Bond Fund',
                'gold': 'Gold ETF/Gold Bond',
                'reits': 'REIT Fund/Direct REITs',
                'bitcoin': 'Bitcoin ETF/Crypto Exchange',
                'ethereum': 'Ethereum via Crypto Exchange',
                'altcoins': 'Diversified Crypto Fund'
            };
            return vehicles[asset] || 'Mutual Fund/ETF';
        }

        // Initialize
        document.getElementById('lastUpdated').textContent = new Date().toLocaleString('en-IN');
